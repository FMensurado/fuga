# File: fibonacci-fast.fg
# Date: Oct 5, 2010
# 
#

fib(n) => fibAux(n, 0, 1)

fibAux(n, a,b) => if(
    n == 0
    a
    fibAux(n - 1, b, a + b)
)

do = method(
    (a) => a
    (a,b) => b
    (a,b,c) => c
    (a,b,c,d) => d
    (a,b,c,d,e) => e
    (a,b,c,d,e,f) => f
)

Int to(b) => if(
    self == b
    list(self)
    do(mid = self + [b - self]//2,
       self to(mid) ++ [mid + 1] to(self))
)

start = 0
end   = 40 

start to(end) map(
    (n) => print(n, fib(n))
)

